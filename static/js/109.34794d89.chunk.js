"use strict";(self.webpackChunkedh_builder=self.webpackChunkedh_builder||[]).push([[109],{7358:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var a=n(6515),r=n(3430),c=n(2791),i=n(1899),u=n(9271),o=n(6146),d=n(7872),s=n(184);var l=function(){var e=(0,i.v9)((function(e){return e.requestDecklist})).deckDetails,t=(0,c.useState)([]),n=(0,r.Z)(t,2),l=n[0],f=n[1],m=(0,c.useState)([]),h=(0,r.Z)(m,2),p=h[0],v=h[1],S=(0,c.useState)([]),_=(0,r.Z)(S,2),k=_[0],x=_[1],D=(0,c.useState)(),E=(0,r.Z)(D,2),P=E[0],C=E[1],N=(0,c.useState)(),b=(0,r.Z)(N,2),T=b[0],g=b[1],j=(0,c.useState)(!1),R=(0,r.Z)(j,2),Z=R[0],O=R[1],w=(0,c.useState)(""),I=(0,r.Z)(w,2),y=I[0],A=I[1],H=(0,c.useState)(""),L=(0,r.Z)(H,2),U=L[0],K=L[1],W=(0,c.useState)(""),F=(0,r.Z)(W,2),B=F[0],V=F[1],q=(0,c.useState)(0),z=(0,r.Z)(q,2),J=z[0],M=z[1],Y=(0,c.useState)(!1),G=(0,r.Z)(Y,2),Q=G[0],X=G[1],$=(0,i.v9)((function(e){return e.loginStatus})).userId,ee=(0,u.TH)(),te=(0,i.I0)();(0,c.useEffect)((function(){fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"/EDH-BUILDER",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,"/commanders")).then((function(e){return e.json()})).then((function(e){if(e.length){var t=e.map((function(e){return{value:e.cardName,label:e.cardName,isPartner:e.isPartner,text:e.oracle_text}})),n=e.filter((function(e){return e.isPartner&&!e.oracle_text.includes("Partner with")})).map((function(e){return{value:e.cardName,label:e.cardName}}));v(t),f(n),x([{value:y,label:y}])}})).catch()}),[v,f,x,y]),(0,c.useEffect)((function(){"/adddeck"!==ee.pathname&&(C({label:e.commander,value:e.commander}),V(e.description),K(e.deckName),e.partner&&(g({label:e.partner,value:e.partner}),O(!0)))}),[ee,V,K,O,C,g,e]);var ne=function(e,t){return!!e.value.toLowerCase().replace(/'|,|-/g,"").includes(t.toLowerCase().replace(/'|,|-/g,""))},ae=function(e,t,n){return(0,s.jsx)(o.ZP,{maxMenuHeight:200,defaultValue:n,options:e,placeholder:"Select your commander",onChange:t,filterOption:ne,theme:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderRadius:0,colors:(0,a.Z)((0,a.Z)({},e.colors),{},{text:"orangered",primary25:"indigo",primary:"indigo",fontsize:"10px"})})}})};return(0,s.jsx)(s.Fragment,{children:J?(0,s.jsx)(u.l_,{to:"/decklist/".concat(J)}):(0,s.jsx)("div",{className:"outer-create-container",children:(0,s.jsxs)("div",{className:"new-deck",children:[(0,s.jsx)("div",{className:"banner",children:(0,s.jsx)("h1",{children:"Deck Details"})}),(0,s.jsxs)("div",{className:"new-deck-form",children:[(0,s.jsx)("input",{onChange:function(e){return K(e.target.value)},value:U,type:"text",placeholder:"Deck Name",id:"deckName"}),ae(p,(function(e){C(e),e&&e.isPartner?(O(!0),A(""),e.text.includes("Partner with")&&A(e.text.substring(13,e.text.indexOf(" (")))):(O(!1),g(null))}),P),Z?ae(y.length?k:l,(function(e){g(e)}),T):null,(0,s.jsx)("textarea",{onChange:function(e){return V(e.target.value)},value:B,placeholder:"Your deck in a few words..."}),Q&&(0,s.jsx)("div",{className:"invalid",children:"Please make sure a commander is selected and you have chosen a name for your deck."}),(0,s.jsx)("input",{onClick:function(t){return function(t){t.preventDefault();var n="".concat({NODE_ENV:"production",PUBLIC_URL:"/EDH-BUILDER",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,"/").concat("/adddeck"!==ee.pathname?"editdeck/".concat(e.deckID):"createdeck");fetch(n,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:$,deckName:U,commander:P&&P.value,deckDescription:B,partner:T&&T.value})}).then((function(e){return e.json()})).then((function(t){"/adddeck"===ee.pathname?M(t):te((0,d.Rt)(e.deckID,$))})).catch(X(!0))}(t)},type:"submit",id:"new-deck-button",value:"/adddeck"===ee.pathname?"build":"edit"})]}),(0,s.jsx)("div",{className:"bottom-banner"})]})})})}}}]);
//# sourceMappingURL=109.34794d89.chunk.js.map