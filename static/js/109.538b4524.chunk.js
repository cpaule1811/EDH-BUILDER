"use strict";(self.webpackChunkedh_builder=self.webpackChunkedh_builder||[]).push([[109],{7358:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var a=n(6515),r=n(3430),c=n(2791),u=n(1899),i=n(9271),o=n(6146),d=n(7872),s=n(184);var l=function(){var e=(0,u.v9)((function(e){return e.requestDecklist})).deckDetails,t=(0,c.useState)([]),n=(0,r.Z)(t,2),l=n[0],h=n[1],m=(0,c.useState)([]),f=(0,r.Z)(m,2),p=f[0],k=f[1],v=(0,c.useState)([]),x=(0,r.Z)(v,2),b=x[0],g=x[1],j=(0,c.useState)(),Z=(0,r.Z)(j,2),N=Z[0],S=Z[1],w=(0,c.useState)(),y=(0,r.Z)(w,2),D=y[0],C=y[1],P=(0,c.useState)(!1),I=(0,r.Z)(P,2),_=I[0],O=I[1],E=(0,c.useState)(""),H=(0,r.Z)(E,2),L=H[0],R=H[1],T=(0,c.useState)(""),q=(0,r.Z)(T,2),z=q[0],F=q[1],J=(0,c.useState)(""),M=(0,r.Z)(J,2),V=M[0],Y=M[1],A=(0,c.useState)(0),B=(0,r.Z)(A,2),G=B[0],K=B[1],Q=(0,c.useState)(!1),U=(0,r.Z)(Q,2),W=U[0],X=U[1],$=(0,u.v9)((function(e){return e.loginStatus})).userId,ee=(0,i.TH)(),te=(0,u.I0)();(0,c.useEffect)((function(){fetch("".concat("https://edh-builder-api.herokuapp.com/","commanders")).then((function(e){return e.json()})).then((function(e){if(e.length){var t=e.map((function(e){return{value:e.cardName,label:e.cardName,isPartner:e.isPartner,text:e.oracle_text}})),n=e.filter((function(e){return e.isPartner&&!e.oracle_text.includes("Partner with")})).map((function(e){return{value:e.cardName,label:e.cardName}}));k(t),h(n),g([{value:L,label:L}])}})).catch()}),[k,h,g,L]),(0,c.useEffect)((function(){"/adddeck"!==ee.pathname&&(S({label:e.commander,value:e.commander}),Y(e.description),F(e.deckName),e.partner&&(C({label:e.partner,value:e.partner}),O(!0)))}),[ee,Y,F,O,S,C,e]);var ne=function(e,t){return!!e.value.toLowerCase().replace(/'|,|-/g,"").includes(t.toLowerCase().replace(/'|,|-/g,""))},ae=function(e,t,n){return(0,s.jsx)(o.ZP,{maxMenuHeight:200,defaultValue:n,options:e,placeholder:"Select your commander",onChange:t,filterOption:ne,theme:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderRadius:0,colors:(0,a.Z)((0,a.Z)({},e.colors),{},{text:"orangered",primary25:"indigo",primary:"indigo",fontsize:"10px"})})}})};return(0,s.jsx)(s.Fragment,{children:G?(0,s.jsx)(i.l_,{to:"/decklist/".concat(G)}):(0,s.jsx)("div",{className:"outer-create-container",children:(0,s.jsxs)("div",{className:"new-deck",children:[(0,s.jsx)("div",{className:"banner",children:(0,s.jsx)("h1",{children:"Deck Details"})}),(0,s.jsxs)("div",{className:"new-deck-form",children:[(0,s.jsx)("input",{onChange:function(e){return F(e.target.value)},value:z,type:"text",placeholder:"Deck Name",id:"deckName"}),ae(p,(function(e){S(e),e&&e.isPartner?(O(!0),R(""),e.text.includes("Partner with")&&R(e.text.substring(13,e.text.indexOf(" (")))):(O(!1),C(null))}),N),_?ae(L.length?b:l,(function(e){C(e)}),D):null,(0,s.jsx)("textarea",{onChange:function(e){return Y(e.target.value)},value:V,placeholder:"Your deck in a few words..."}),W&&(0,s.jsx)("div",{className:"invalid",children:"Please make sure a commander is selected and you have chosen a name for your deck."}),(0,s.jsx)("input",{onClick:function(t){return function(t){t.preventDefault();var n="".concat("https://edh-builder-api.herokuapp.com/").concat("/adddeck"!==ee.pathname?"editdeck/".concat(e.deckID):"createdeck");fetch(n,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:$,deckName:z,commander:N&&N.value,deckDescription:V,partner:D&&D.value})}).then((function(e){return e.json()})).then((function(t){"/adddeck"===ee.pathname?K(t):te((0,d.Rt)(e.deckID,$))})).catch(X(!0))}(t)},type:"submit",id:"new-deck-button",value:"/adddeck"===ee.pathname?"build":"edit"})]}),(0,s.jsx)("div",{className:"bottom-banner"})]})})})}}}]);
//# sourceMappingURL=109.538b4524.chunk.js.map